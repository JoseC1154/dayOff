<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>Day-Off Request Calculator</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="title">Day-Off Calculator</div>
      <div class="subtitle" id="ruleText">30 days in advance + 2-day early reminder</div>
    </div>

    <div class="iconGroup">
  <button class="iconBtn" id="openSaved" aria-label="Open saved dates" title="Saved dates">
    <!-- Folder icon (inline SVG) -->
    <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
      <path fill="currentColor" d="M10 4l2 2h8c1.1 0 2 .9 2 2v10c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h6zm10 6H4v10h16V10z"/>
    </svg>
  </button>

  <button class="iconBtn" id="openSettings" aria-label="Open settings" title="Settings">
    <!-- Gear icon (inline SVG) -->
    <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
      <path fill="currentColor" d="M19.14,12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.11-.2-.36-.28-.57-.2l-2.39.96c-.5-.38-1.04-.69-1.62-.92l-.36-2.54c-.03-.22-.22-.39-.45-.39h-3.84c-.23,0-.42.17-.45.39l-.36,2.54c-.58.23-1.12.54-1.62.92l-2.39-.96c-.21-.08-.46,0-.57.2l-1.92,3.32c-.11.2-.06.47.12.61l2.03,1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03,1.58c-.18.14-.23.41-.12.61l1.92,3.32c.11.2.36.28.57.2l2.39-.96c.5.38 1.04.69 1.62.92l.36,2.54c.03.22.22.39.45.39h3.84c.23,0,.42-.17.45-.39l.36-2.54c.58-.23 1.12-.54 1.62-.92l2.39.96c.21.08.46,0 .57-.2l1.92-3.32c.11-.2.06-.47-.12-.61l-2.03-1.58ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
    </svg>
  </button>
</div>

  </header>

  <main class="home">
    <section class="hero card">
      <h1>What do you want to do?</h1>
      <p class="muted">Pick an option. We’ll show the right calculator in a modal.</p>

      <div class="choiceRow">
        <button class="bigBtn" id="btnSubmitToday">
          <span class="bigBtnTitle">Submit today</span>
          <span class="bigBtnSub">See the day-off date you qualify for</span>
        </button>

        <button class="bigBtn" id="btnPickDayOff">
          <span class="bigBtnTitle">Pick a day-off date</span>
          <span class="bigBtnSub">See submit-by + early reminder dates</span>
        </button>
      </div>
    </section>

    <footer class="footer">
      <span id="status">Ready</span>
    </footer>
  </main>

  <!-- Backdrop -->
  <div class="backdrop" id="backdrop" hidden></div>

  <!-- Modal: Submit Today -->
  <section class="modal" id="modalSubmitToday" role="dialog" aria-modal="true" aria-labelledby="submitTitle" hidden>
    <div class="modalHeader">
      <div>
        <div class="modalTitle" id="submitTitle">Submit today</div>
        <div class="modalSub muted" id="submitRuleText">—</div>
      </div>
      <button class="iconBtn" data-close aria-label="Close modal" title="Close">✕</button>
    </div>

    <div class="modalBody">
      <div class="field">
        <label>Today</label>
        <input id="today" type="date" />
      </div>

    <div class="heroResult" aria-live="polite">
      <div class="heroLabel">Your day-off date</div>
      <div class="heroValue" id="todayPlusAdvanceHero">—</div>
      <div class="heroSub" id="todayPlusAdvanceSub">Based on today + advance days</div>
    </div>


      <div class="row">
        <button id="exportDayOffFromTodayBtn" type="button">Export Day-off (.ics)</button>
      </div>
    </div>
  </section>

  <!-- Modal: Pick Day Off -->
  <section class="modal" id="modalPickDayOff" role="dialog" aria-modal="true" aria-labelledby="pickTitle" hidden>
    <div class="modalHeader">
      <div>
        <div class="modalTitle" id="pickTitle">Pick a day-off date</div>
        <div class="modalSub muted" id="pickRuleText">—</div>
      </div>
      <button class="iconBtn" data-close aria-label="Close modal" title="Close">✕</button>
    </div>

    <div class="modalBody">
      <div class="field">
        <label>Day-off date</label>
        <input id="dayOffDate" type="date" />
      </div>

      <!-- Modal: Saved Dates -->
<section class="modal" id="modalSaved" role="dialog" aria-modal="true" aria-labelledby="savedTitle" hidden>
  <div class="modalHeader">
    <div>
      <div class="modalTitle" id="savedTitle">Saved Dates</div>
      <div class="modalSub muted">Tap Open to view deadlines and exports</div>
    </div>
    <button class="iconBtn" data-close aria-label="Close modal" title="Close">✕</button>
  </div>

  <div class="modalBody">
    <div id="savedList" class="list"></div>

    <div class="row rowWrap">
      <button id="clearAllBtn" class="danger" type="button">Clear all saved</button>
    </div>
  </div>
</section>

         <div class="heroResult" aria-live="polite">
      <div class="heroLabel">Submit your request by</div>
      <div class="heroValue" id="submitByHero">—</div>
      <div class="heroSub" id="submitBySub">Day off − advance days</div>
    </div>
    
    <div class="resultBox">
      <div class="k">Early reminder</div>
      <div class="v" id="earlyReminder">—</div>
    </div>


      <div class="field">
        <label>Label (optional)</label>
        <input id="label" type="text" placeholder="e.g., Family trip" />
      </div>

      <div class="row rowWrap">
        <button id="saveBtn" type="button">Save</button>
        <button id="exportDayOffBtn" type="button">Day-off .ics</button>
        <button id="exportSubmitByBtn" type="button">Submit-by .ics</button>
        <button id="exportEarlyBtn" type="button">Early .ics</button>
      </div>
    </div>
  </section>

  <!-- Modal: Settings -->
  <section class="modal" id="modalSettings" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" hidden>
    <div class="modalHeader">
      <div>
        <div class="modalTitle" id="settingsTitle">Settings</div>
        <div class="modalSub muted">Saved on this device</div>
      </div>
      <button class="iconBtn" data-close aria-label="Close modal" title="Close">✕</button>
    </div>

    <div class="modalBody">
      <div class="field">
        <label>Days in advance (policy)</label>
        <input id="advanceDays" type="number" min="0" step="1" inputmode="numeric" />
      </div>

      <div class="field">
        <label>Extra early days (reminder)</label>
        <input id="earlyExtraDays" type="number" min="0" step="1" inputmode="numeric" />
      </div>

      <div class="resultBox">
        <div class="k">Early reminder offset</div>
        <div class="v" id="earlyOffsetText">—</div>
      </div>

      <div class="row rowWrap">
        <button id="saveSettingsBtn" type="button">Save settings</button>
        <button id="resetSettingsBtn" class="danger" type="button">Reset defaults</button>
      </div>

      <p class="muted small">
        Early reminder = day-off − (advanceDays + earlyExtraDays)
      </p>
    </div>
  </section>

  <script src="app.js"></script>
</body>
</html>
